version: '3.9'
services:
  db:
    image: postgres:16
    environment:
      POSTGRES_USER: forge
      POSTGRES_PASSWORD: super-secure-pass
      POSTGRES_DB: forge
    ports:
      - "7543:5432"
    command: ["postgres", "-c", "shared_preload_libraries=vector"]
  backend:
    build: ../backend
    environment:
      DATABASE_URL: postgresql://forge:super-secure-pass@db:5432/forge
    ports:
      - "8443:8443"
    depends_on:
      - db
